
<!DOCTYPE html>
<html lang="cs-cz">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<link rel="shortcut icon" href="http://blog.omdesign.cz/favicon.ico">
	<meta name="author" content="Roman Ožana">
	<title>How to add all custom post type to main Wordpress archive.php</title>
	<link rel="canonical" href="https://blog.testomato.com/" />	
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:title" content="How to add all custom post type to main Wordpress archive.php"/>
	<meta name="twitter:description" content=" How to add all custom post type to main Wordpress archive.php Default archive shows only post type if you need show all post types just add follow code to function.php
add_filter( &#39;pre_get_posts&#39;, function ($query) { if ( $query-&gt;is_main_query() &amp;&amp; !is_admin() &amp;&amp; (is_category() || is_tag()) &amp;&amp; empty($query-&gt;query_vars[&#39;suppress_filters&#39;]) ) { $posts = array_diff( get_post_types([&#39;public&#39; =&gt; true]), [&#39;page&#39;, &#39;attachment&#39;, &#39;revision&#39;, &#39;forum&#39;, &#39;reply&#39;, &#39;topic&#39;] /* array of ignored types*/ ); $query-&gt;set( &#39;post_type&#39;, $posts ); return $query; } } );  "/>
	<meta name="twitter:site" content="@OzzyCzech"/>
	<meta name="twitter:domain" content="http://blog.omdesign.cz"/>
	<meta name="twitter:creator" content="@OzzyCzech"/>
	<meta property="og:title" content="How to add all custom post type to main Wordpress archive.php" />
	<meta property="og:description" content=" How to add all custom post type to main Wordpress archive.php Default archive shows only post type if you need show all post types just add follow code to function.php
add_filter( &#39;pre_get_posts&#39;, function ($query) { if ( $query-&gt;is_main_query() &amp;&amp; !is_admin() &amp;&amp; (is_category() || is_tag()) &amp;&amp; empty($query-&gt;query_vars[&#39;suppress_filters&#39;]) ) { $posts = array_diff( get_post_types([&#39;public&#39; =&gt; true]), [&#39;page&#39;, &#39;attachment&#39;, &#39;revision&#39;, &#39;forum&#39;, &#39;reply&#39;, &#39;topic&#39;] /* array of ignored types*/ ); $query-&gt;set( &#39;post_type&#39;, $posts ); return $query; } } );  " />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="http://blog.omdesign.cz/how-to-add-all-custom-post-type-to-main-wordpress-archive.php/" />
	<meta property="og:updated_time" content="2014-07-24 00:00:00 &#43;0000 UTC"/>
	<meta property="og:site_name" content="blog.omdesign.cz" />
	<meta property="article:author" content="https://www.facebook.com/roman.ozana" />
	<meta property="article:publisher" content="https://www.facebook.com/roman.ozana" />
	<meta property="article:published_time" content="0001-01-01 00:00:00 &#43;0000 UTC" />
	<meta property="article:modified_time" content="2014-07-24 00:00:00 &#43;0000 UTC" />
	<meta property="article:section" content="posts" />
	<meta property="article:tag" content="archive" />
	<meta property="article:tag" content="hack" />
	<meta property="article:tag" content="PHP" />
	<meta property="article:tag" content="wordpress" />
	<meta itemprop="name" content="How to add all custom post type to main Wordpress archive.php">
	<meta itemprop="description" content=" How to add all custom post type to main Wordpress archive.php Default archive shows only post type if you need show all post types just add follow code to function.php
add_filter( &#39;pre_get_posts&#39;, function ($query) { if ( $query-&gt;is_main_query() &amp;&amp; !is_admin() &amp;&amp; (is_category() || is_tag()) &amp;&amp; empty($query-&gt;query_vars[&#39;suppress_filters&#39;]) ) { $posts = array_diff( get_post_types([&#39;public&#39; =&gt; true]), [&#39;page&#39;, &#39;attachment&#39;, &#39;revision&#39;, &#39;forum&#39;, &#39;reply&#39;, &#39;topic&#39;] /* array of ignored types*/ ); $query-&gt;set( &#39;post_type&#39;, $posts ); return $query; } } );  ">
	<meta itemprop="keywords" content="ajax,angular,antispam,archive,atom,auto,automator,barvy,bash,bluetooth,boostrap,bootstrap,brew,canvas,cloud,composer,css,cukroví,database,diplomka,drive,email,excerpt,flux,ftp,git,github,hack,hash,heartbleed,hermelín,hlavní-jídlo,howto,html,images,internet,ios,iphone,js,json,lifehacker,mac,meta,movies,nodejs,npm,oauth,oko,openssl,osx,parkinsons-law,pear,perník,pečení,php,plugin,pomazánky,přepis-auta,quotes,react,rebase,recepty,redux,retina,shell,shopping,speakers,student,svg,terminal,tip,todo,tyčinky,user,ux,webdesign,wireless,wordpress,wysiwyg,xcode,youtube,zamyšlení,zdraví," />
	<meta itemprop="wordCount" content="75">
<!-- Fonts, jQuery and js -->
	<link href="//fonts.googleapis.com/css?family=Lora" rel="stylesheet">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
	<script src="http://blog.omdesign.cz/js/app.js"></script>
	<!-- Twitter boostrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
	<!-- highlight.js -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/monokai-sublime.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<link href="http://blog.omdesign.cz/css/style.css" rel="stylesheet">
	<meta name="msvalidate.01" content="3A844D439E786F7E8FA940D153567FD3" />
</head>
<body>
<header class="hidden-print">
	<nav>
		<ul>
			<li><a href="https://omdesign.cz/">Home</a></li>
			<li><a href="https://omdesign.cz/work">Work</a></li>
			<li><a href="https://omdesign.cz/resume">Resume</a></li>
			<li class="active"><a href="http://blog.omdesign.cz">Blog</a></li>
			<li><a href="https://omdesign.cz/contact">Contact</a></li>
			<li>
<form action="https://google.com/search" method="get">
  <input type="search" name="q" value="" class="form-control" placeholder="Search..." autocomplete="off">
  <input type="hidden" name="as_sitesearch" value="blog.omdesign.cz">
</form>
</li>
		</ul>
	</nav>

</header>


<section class="container articles">
	<article>
		
		<time datetime="2014-07-24T00:00:00Z">24. Červenec 2014</time>
		
		

<h1 id="how-to-add-all-custom-post-type-to-main-wordpress-archive-php">How to add all custom post type to main Wordpress archive.php</h1>

<p>Default archive shows only <code>post</code> type if you need show all post types just add follow code to <code>function.php</code></p>

<pre><code>add_filter(
'pre_get_posts', function ($query) {
        if (
            $query-&gt;is_main_query() &amp;&amp;
            !is_admin() &amp;&amp;
            (is_category() || is_tag())
            &amp;&amp; empty($query-&gt;query_vars['suppress_filters'])
        ) {
            $posts = array_diff(
                get_post_types(['public' =&gt; true]), ['page', 'attachment', 'revision', 'forum', 'reply', 'topic'] /* array of ignored types*/
            );
            $query-&gt;set(
                'post_type', $posts
            );
            return $query;
        }
    }
);
</code></pre>

	</article>
</section>


<footer class="container hidden-print">
	<div class="tags hidden-print">
	
		<a href="http://blog.omdesign.cz/tags/archive" class="tag">#archive</a>
	
		<a href="http://blog.omdesign.cz/tags/hack" class="tag">#hack</a>
	
		<a href="http://blog.omdesign.cz/tags/php" class="tag">#PHP</a>
	
		<a href="http://blog.omdesign.cz/tags/wordpress" class="tag">#wordpress</a>
	
	</div>

	<a href="http://blog.omdesign.cz" class="btn btn-primary btn-lg" onclick="history.go(-1);">
		Return back
	</a>
</footer>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-5420131-1', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>

